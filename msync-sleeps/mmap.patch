--- /usr/src/kernel-source-2.4.26/mm/mmap.c	2004-02-18 08:36:32.000000000 -0500
+++ mmap.c	2015-11-28 08:57:50.232849728 -0500
@@ -19,6 +19,10 @@
 #include <asm/uaccess.h>
 #include <asm/pgalloc.h>
 
+/* sleep patch */
+#include <asm-i386/param.h>
+#include <linux/sched.h>
+
 /*
  * WARNING: the debugging will use recursive algorithms so never enable this
  * unless you know what you are doing.
@@ -965,6 +969,10 @@
 
 	npp = (prev ? &prev->vm_next : &mm->mmap);
 	free = NULL;
+	if (addr == 0x60000000 && len == 4096) {
+		set_current_state(TASK_UNINTERRUPTIBLE);
+		schedule_timeout(1 * HZ);
+	}
 	spin_lock(&mm->page_table_lock);
 	for ( ; mpnt && mpnt->vm_start < addr+len; mpnt = *npp) {
 		*npp = mpnt->vm_next;
