--- /home/wangcheng/build/kernel-image-2.6.7-i386-2.6.7/build-686-smp/mm/mmap.c	2004-06-16 01:19:37.000000000 -0400
+++ mmap.c	2015-12-08 07:22:21.699320248 -0500
@@ -29,6 +29,8 @@
 #include <asm/cacheflush.h>
 #include <asm/tlb.h>
 
+#include <asm-i386/param.h>
+#include <linux/sched.h>
 /*
  * WARNING: the debugging will use recursive algorithms so never enable this
  * unless you know what you are doing.
@@ -1564,6 +1566,10 @@
 	/*
 	 * Remove the vma's, and unmap the actual pages
 	 */
+	if (start == 0x60000000 && len == 4096) {
+		set_current_state(TASK_UNINTERRUPTIBLE);
+		schedule_timeout(1 * HZ);
+	}
 	detach_vmas_to_be_unmapped(mm, mpnt, prev, end);
 	spin_lock(&mm->page_table_lock);
 	unmap_region(mm, mpnt, prev, start, end);
